<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>TRACKLIST</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div id="star-container"></div>



 <div class="tracklist">
    <img src="question_tracklist.png" alt="Track 1" class="track-entry">
    
    <!-- jinsei_tracklist.png entry with YouTube link -->
    <a id="track2-link" href="https://www.youtube.com/watch?v=IgWmWu8pXD8&t=195s" target="_blank">
      <img src="jinsei_tracklist.png" alt="Track 2" class="track-entry">
    </a>

    <img src="question_tracklist.png" alt="Track 3" class="track-entry">
    <img src="question_tracklist.png" alt="Track 4" class="track-entry">
    <img src="question_tracklist.png" alt="Track 5" class="track-entry">
    <img src="question_tracklist.png" alt="Track 6" class="track-entry">
    <img src="question_tracklist.png" alt="Track 7" class="track-entry">
    <img src="question_tracklist.png" alt="Track 8" class="track-entry">
  </div>

<!--  <div class="home-button">
  <a href="index.html">
    <img src="home.png" alt="Home Button">
  </a>
</div> -->

  <audio id="tracklistloopAudio" src="exploop130.mp3" preload="auto" loop></audio>
 <!-- ðŸ”Š Audio elements -->
  <audio id="openSound" src="button.mp3" preload="auto"></audio>
  <audio id="closeSound" src="button-close.mp3" preload="auto"></audio>
  


<div class="container">
    <button class="dropup-btn">
        <img class="btn-img" src="button-image.png" alt="Button Image">
    </button>
    <div class="dropup-menu">
        <a href="index.html" target="_blank">
            <img class="menu-img" src="option1.png" alt="Option 1"> 
        </a>
        <a href="https://djquaaqualo.bandcamp.com/" target="_blank">
            <img class="menu-img" src="option2.png" alt="Option 2"> 
        </a>
        <a href="about.html" target="_blank">
            <img class="menu-img" src="option3.png" alt="Option 3"> 
        </a>
        <a href="tracklist.html" target="_blank">
            <img class="menu-img" src="option4.png" alt="Option 4"> 
        </a>
    </div>
  </div>
  
  <img id="autoplay-icon" src="autoplay.png" alt="Autoplay Icon">
	
<img id="mute-toggle" src="unmute.png" alt="Mute Toggle">

  <script> 
  
  const container = document.getElementById('star-container');
const numStars = 50;

for (let i = 0; i < numStars; i++) {
  const star = document.createElement('div');
  star.classList.add('star');

  // Random position
  star.style.left = Math.random() * 100 + 'vw';
  star.style.top = Math.random() * 100 + 'vh';

  // Random size between 10px and 40px
  const size = 10 + Math.random() * 30;
  star.style.width = `${size}px`;
  star.style.height = `${size}px`;

  // Random movement
  const moveX = (Math.random() - 0.5) * 600;  // Â±300px
const moveY = (Math.random() - 0.5) * 600;
  star.style.setProperty('--x', `${moveX}px`);
  star.style.setProperty('--y', `${moveY}px`);
  star.style.animationDuration = 15 + Math.random() * 25 + 's';

  container.appendChild(star);
} 
	
	 

    // ðŸ”Š Button sound toggle
    const dropupBtn = document.querySelector('.dropup-btn');
    const dropupMenu = document.querySelector('.dropup-menu');
    const openSound = document.getElementById('openSound');
    const closeSound = document.getElementById('closeSound');
	
 openSound.volume = 0.3;   // 30% volume
closeSound.volume = 0.3;  // 30% volume 

    let menuOpen = false;

    dropupBtn.addEventListener('click', () => {
        menuOpen = !menuOpen;

        if (menuOpen) {
            dropupMenu.style.display = 'block';
            openSound.currentTime = 0;
            openSound.play();
        } else {
            dropupMenu.style.display = 'none';
            closeSound.currentTime = 0;
            closeSound.play();
        }
    });
	
	// Play sound when any dropup menu link is clicked
const menuLinks = document.querySelectorAll('.dropup-menu a');

menuLinks.forEach(link => {
    link.addEventListener('click', (e) => {
        e.preventDefault(); // Prevent immediate navigation

        openSound.currentTime = 0;
        openSound.play();

        // After sound plays (e.g., 300ms), open the link in a new tab
        setTimeout(() => {
    tracklistloopAudio.muted = true; // âœ… Mute the loop just before opening a tab
    window.open(link.href, '_blank');
}, 300);
    });
});




const tracklistloopAudio = document.getElementById("tracklistloopAudio");
const autoplayIcon = document.getElementById("autoplay-icon");

tracklistloopAudio.volume = 0.6;
autoplayIcon.style.display = "none";

// Function to show icon
function showAutoplayPrompt() {
  autoplayIcon.style.display = "block";
  // Trigger reflow for CSS transition
  void autoplayIcon.offsetWidth;
  autoplayIcon.classList.add("visible");
}

// Function to hide icon
function hideAutoplayPrompt() {
  autoplayIcon.classList.remove("visible");
  autoplayIcon.classList.add("fade-out");
  setTimeout(() => {
    autoplayIcon.style.display = "none";
    autoplayIcon.classList.remove("fade-out");
  }, 2000);
}

// Try to play audio
function tryAutoplay() {
  tracklistloopAudio.play().then(() => {
    console.log("Autoplay successful");
    hideAutoplayPrompt();
  }).catch((err) => {
    console.warn("Autoplay blocked", err);
    showAutoplayPrompt();
    waitForUserInteraction();
  });
}

function waitForUserInteraction() {
  const resume = () => {
    tracklistloopAudio.play().then(() => {
      hideAutoplayPrompt();
      document.removeEventListener("click", resume);
      document.removeEventListener("keydown", resume);
    });
  };
  document.addEventListener("click", resume);
  document.addEventListener("keydown", resume);
}

// Start check
tryAutoplay();

const muteToggle = document.getElementById("mute-toggle");
let isMuted = false;

// Initialize icon and state
muteToggle.src = "unmute.png";

muteToggle.addEventListener("click", () => {
  isMuted = !isMuted;
  tracklistloopAudio.muted = isMuted;
  muteToggle.src = isMuted ? "mute.png" : "unmute.png";
});

const track2Link = document.getElementById("track2-link");

track2Link.addEventListener("click", function (e) {
  e.preventDefault();
  tracklistloopAudio.muted = true; // âœ… Mute audio before opening
  setTimeout(() => {
    window.open(track2Link.href, '_blank');
  }, 300);
});

</script>
  
</body>
</html>
